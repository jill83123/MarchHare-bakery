import{k as p}from"./tw-elements.es.min-69e8dc80.js";import{c as g,m as y,b as k,r as w,o as l,d,e as t,F as u,i as v,t as n,l as x,M as C,g as o,h as r,f as L,w as M,n as h,k as S,v as $,j as T}from"./index-bf4ebe37.js";import{s as q,c as m}from"./cartStore-b351ca37.js";import{S as N}from"./swalMixin-1ccae8ce.js";import"./base-593d189d.js";const V={data(){return{pickupMethod:""}},computed:{...y(m,["cartList","cartTotalPrice","status","currentStep","userInfo"])},methods:{...k(m,["delCartItem","updateCart","getCartList","updateCurrentStep","checkCartList"]),cancelOrder(){this.delCartItem("all"),this.$router.push("/shop")}},created(){this.updateCurrentStep(1)},mounted(){this.getCartList(),this.$nextTick(()=>{const i=this.$refs.pickupMethodSelect;p.getOrCreateInstance(i)});const s=this.cartList.findIndex(i=>i.id===q.id);s!==-1&&this.cartList.splice(s,1),localStorage.setItem("cartList",JSON.stringify(this.cartList)),this.getCartList()},beforeUnmount(){this.$refs.pickupMethodSelect&&new p(this.$refs.pickupMethodSelect).dispose()},mixins:[N]},j={key:0,"data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true",class:"container flex flex-col"},z={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},U={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},O={class:"overflow-hidden"},B={class:"mb-6 min-w-full text-left text-sm"},D=t("thead",{class:"border-b border-gray-400 font-medium text-black"},[t("tr",null,[t("th",{scope:"col",class:"w-[5%] px-1 py-4 md:px-4 lg:px-6"},"#"),t("th",{scope:"col",class:"px-1 py-4 md:w-[55%] md:px-4 lg:px-6"},"清單"),t("th",{scope:"col",class:"px-1 py-4 max-[479px]:w-[20%] md:w-[15%] md:px-4 lg:px-6"},"小計"),t("th",{scope:"col",class:"w-[15%] px-1 py-4 md:px-4 lg:px-6"},"編輯"),t("th",{scope:"col",class:"w-[10%] px-0 py-4 md:px-4 lg:px-6"},"刪除")])],-1),E={class:"text-black-light"},F={class:"min-w-[480px]:px-2 py-4 pl-2 font-medium md:px-4 lg:px-6"},P={class:"px-2 py-4 md:px-4 lg:px-6"},A={class:"flex flex-col gap-2 min-[480px]:flex-row md:gap-8"},H=["src","alt"],R={class:"flex flex-col justify-center"},J={class:"mb-2"},G={class:"mr-1 block font-medium text-black lg:text-xl"},K={key:0,class:"op ml-1 rounded-full bg-success px-2 font-montserrat text-[8px] text-white sm:text-[10px]"},Q=["innerHTML"],W={class:"whitespace-nowrap px-0 py-4 text-xs tracking-wider max-[480px]:text-center sm:px-2 sm:text-left sm:text-sm md:px-4 lg:px-6"},X=t("span",{class:"hidden sm:inline-block"},"NT",-1),Y={class:"min-w-[480px]:px-2 py-4 md:px-4 lg:px-6"},Z={class:"flex items-center"},I=["onClick","disabled"],tt=["onUpdate:modelValue","onChange"],et={class:"hidden pl-2 text-sm text-gray-400 sm:inline-block"},st=["onClick","disabled"],ot=t("span",{class:"material-symbols-outlined pl-1 align-bottom text-xl text-brown-300"},"add",-1),it=[ot],nt={class:"px-1 py-4 md:px-4 lg:px-6"},lt=["onClick"],dt=t("span",{class:"material-symbols-outlined align-bottom"},"delete",-1),ct=[dt],at={class:"border-t border-gray-200 text-base font-bold tracking-wider text-brown-500"},rt={class:"px-1 py-4 md:px-4 lg:px-6",colspan:"2"},pt={class:"flex justify-between first-letter:items-start"},ut={class:"hidden sm:block"},xt={class:"w-[170px] text-gray-500"},ht=t("option",{disabled:"",selected:""},"請選擇取貨方式",-1),mt=t("option",{value:"delivery"},"宅配",-1),_t=t("option",{value:"self"},"到店自取",-1),bt=[ht,mt,_t],ft={class:"px-1 py-4 max-[480px]:text-center md:px-4 lg:px-6",colspan:"3"},gt={class:"-ml-2 text-sm"},yt=t("div",{class:"flex justify-center"},null,-1),kt=["disabled"],wt={key:1,class:"flex flex-col justify-center py-14"},vt={class:"text-center"},Ct=t("br",null,null,-1);function Lt(s,i,Mt,St,c,_){const b=w("RouterLink");return l(),d(u,null,[s.cartList.length>0?(l(),d("div",j,[t("div",z,[t("div",U,[t("div",O,[t("table",B,[D,t("tbody",E,[(l(!0),d(u,null,v(s.cartList,(e,f)=>(l(),d("tr",{class:"border-b border-gray-200 hover:bg-neutral-100",key:e.id},[t("td",F,n(f+1),1),t("td",P,[t("div",A,[t("img",{class:"w-full object-cover min-[480px]:w-[130px]",src:e.product.imageUrl,alt:e.product.title},null,8,H),t("div",R,[t("div",J,[t("h4",G,[o(n(e.product.title)+" ",1),e.product.price!==e.product.origin_price?(l(),d("span",K," SALE ")):r("",!0)]),t("p",{class:h(["inline-block text-xs tracking-wider text-gray-500",{"mr-2 line-through":e.product.price!==e.product.origin_price}])},[o(" NT "),t("span",null,n(s.$filters.currency(e.product.origin_price)),1),o(" 元 ")],2),e.product.price!==e.product.origin_price?(l(),d("p",{key:0,class:h(["inline-block text-xs tracking-wider text-gray-500",{"font-bold text-success":e.product.price!==e.product.origin_price}])},[o(" NT "),t("span",null,n(s.$filters.currency(e.product.price)),1),o(" 元 ")],2)):r("",!0)]),t("div",{innerHTML:e.product.description,class:"hidden lg:block"},null,8,Q)])])]),t("td",W,[t("span",null,[X,o(" "+n(s.$filters.currency(e.final_total))+" 元 ",1)])]),t("td",Y,[t("div",Z,[t("button",{type:"button",class:"pr-1",onClick:a=>s.updateCart(e.id,e.qty>1?e.qty-1:1),disabled:s.status.updateIcon===e.id||e.qty===1},[t("span",{class:"material-symbols-outlined align-bottom text-xl text-brown-300",style:S({color:e.qty===1?"#d1d5db":""})}," remove ",4)],8,I),t("label",null,[x(t("input",{type:"text",class:"max-w-[40px] border bg-transparent text-center outline-none focus:outline-none","onUpdate:modelValue":a=>e.qty=a,onChange:a=>s.updateCart(e.id,e.qty===0||e.qty===""?1:e.qty)},null,40,tt),[[$,e.qty]])]),t("span",et,n(e.product.unit),1),t("button",{type:"button",onClick:a=>s.updateCart(e.id,e.qty+1),disabled:s.status.updateIcon===e.id},it,8,st)])]),t("td",nt,[t("button",{type:"button",class:"self-end hover:text-danger",onClick:T(a=>s.showSwalCheck("warning","真的要刪除嗎",()=>s.delCartItem("one",e.id)),["stop"])},ct,8,lt)])]))),128))]),t("tfoot",at,[t("td",rt,[t("div",pt,[t("span",ut,n(s.cartList.length)+" 個商品",1),t("div",xt,[t("label",null,[x(t("select",{"data-te-select-init":"","data-te-class-select-Label":"data-[te-input-state-active]:scale-1 absolute top-[18%] left-[5%] pointer-events-none","onUpdate:modelValue":i[0]||(i[0]=e=>c.pickupMethod=e),ref:"pickupMethodSelect"},bt,512),[[C,c.pickupMethod]])])])])]),t("td",ft,[o(" 共 NT "+n(c.pickupMethod==="delivery"?`${s.$filters.currency(s.cartTotalPrice+80)}`:s.$filters.currency(s.cartTotalPrice))+" 元 ",1),t("p",gt,n(c.pickupMethod==="delivery"?"（含運費 80 元）":""),1)])])]),yt,t("button",{type:"button",class:"text to-check z-10 mx-auto mb-2 flex items-center rounded-full bg-brown-300 px-8 py-2 font-medium uppercase leading-normal tracking-wider text-white transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-0 disabled:bg-gray-300",onClick:i[1]||(i[1]=e=>s.checkCartList(this.pickupMethod)),disabled:!c.pickupMethod}," 確認商品 ",8,kt),t("button",{type:"button",class:"z-10 mx-auto mb-10 flex items-center rounded-full px-8 py-2 text-sm font-medium uppercase leading-normal tracking-wider text-gray-500 transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-1",onClick:i[2]||(i[2]=e=>_.cancelOrder())}," 取消購買 ")])])])])):r("",!0),s.cartList.length===0?(l(),d("div",wt,[t("p",vt,[o(" 目前購物車是空的 "),Ct,o(" 快來 "),L(b,{to:"/shop",type:"button",class:"z-10 mx-1 inline-block items-center border-b border-brown-300 font-medium uppercase leading-normal tracking-wider text-brown-300 transition duration-150 ease-in-out hover:opacity-80"},{default:M(()=>[o(" 點我 ")]),_:1}),o(" 進行選購吧！ ")])])):r("",!0)],64)}const jt=g(V,[["render",Lt]]);export{jt as default};
