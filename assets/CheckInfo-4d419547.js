import{c as v,m as I,b as V,r as c,o as l,d as r,f as n,w as g,e,F as C,i as T,h as d,g as i,n as m,t as u,l as h,v as _}from"./index-7d8cc5ea.js";import{O as z,_ as E}from"./double-tail-clip-993c5dac.js";import{c as x}from"./cartStore-a4d703fb.js";import"./tw-elements.es.min-69e8dc80.js";import"./base-ae4ba7b0.js";import"./swalMixin-1ac3556f.js";const $={data(){return{}},computed:{...I(x,["cartList","cartTotalPrice","status","finalTotalPrice","userInfo"])},methods:{...V(x,["getCartList","updateCurrentStep","pushUserInfo","useCoupon"]),isTel(s){return/^(09[0-9]{8}|0[0-9]{9})$/.test(s)?!0:"請填寫正確的電話號碼"},toPay(){this.userInfo.user.order.is_paid=void 0,this.pushUserInfo(this.userInfo),this.$router.replace("/checkout/pay")}},created(){this.updateCurrentStep(2),this.getCartList(),this.userInfo.user.order.pickupMethod===void 0&&this.$router.replace("/checkout/cart")},components:{OrderRules:z}},P={"data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true",class:"xl:10/12 container mb-16 w-full sm:mb-12 2xl:w-7/12"},L=e("div",{class:"flex items-center"},[e("span",{class:"material-symbols-outlined mr-1"},"keyboard_double_arrow_left"),i(" 返回上一步 ")],-1),U={class:"flex flex-col-reverse gap-8 lg:flex-row lg:gap-0"},N={class:"relative w-full lg:w-1/2 lg:pr-2"},j=e("img",{class:"absolute -top-3 right-10",src:E,alt:"tail-clip"},null,-1),q={class:"mb-4 flex gap-2"},F={class:"relative w-1/2"},S=e("label",{for:"name",class:"mb-1 block"},[i(" 收件人姓名 "),e("span",{class:"text-danger"},"*")],-1),M={key:0,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-danger"},O={key:1,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-success"},R={class:"relative w-1/2"},B=e("label",{for:"tel",class:"mb-1 block"},[i(" 收件人電話 "),e("span",{class:"text-danger"},"*")],-1),D={key:0,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-danger"},A={key:1,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-success"},G={class:"relative mb-4"},H=e("label",{for:"mail",class:"mb-1 block"},[i(" E-mail "),e("span",{class:"text-danger"},"*")],-1),J={key:0,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-danger"},K={key:1,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-success"},Q={class:"relative mb-4"},W=e("label",{for:"address",class:"mb-1 block"},[i(" 地址 "),e("span",{class:"text-danger"},"*")],-1),X={key:0,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-danger"},Y={key:1,class:"material-symbols-outlined absolute bottom-[12%] right-2 text-success"},Z={class:"mb-4"},ee=e("label",{for:"message",class:"mb-1 block"},"留言",-1),se={class:"mb-10"},te=e("label",{for:"coupon",class:"mb-1 block"},"優惠券",-1),oe={class:"relative flex flex-wrap items-stretch"},le={key:0,class:"material-symbols-outlined absolute right-[105px] top-[20%] z-10 mr-1 text-success lg:right-[22%]"},re={key:1,class:"absolute right-[110px] top-[20%] z-10 flex items-center text-sm text-danger"},ae=e("span",{class:"material-symbols-outlined mr-1"},"info",-1),ne=["disabled"],ie={class:"w-full lg:w-1/2 lg:pl-2"},de={class:"rounded-md border bg-[rgb(255,255,255,0.95)]"},ue={class:"px-2 py-4 text-black-light"},ce=e("div",{class:"mb-2 flex border-b-2 border-dotted border-gray-300 pb-3 pl-2"},[e("h4",{class:"mr-1"},"購物車列表")],-1),me={key:0,class:"cart-list mb-2 flex h-[473px] flex-col overflow-y-auto pb-3"},pe={class:"flex aspect-square w-1/4 grow items-center"},be=["src","alt"],fe={class:"flex w-3/4 grow flex-col justify-between px-2"},ge={class:"flex items-center justify-between"},he={class:"inline-block max-w-[90%] truncate text-base font-medium sm:text-lg"},_e={class:"inline-block text-sm"},xe={class:"flex items-center justify-between"},ye={class:"text-xs text-gray-400"},ke={class:"text-sm sm:text-base"},we={class:"mt-3 flex justify-between border-t-2 border-dotted border-gray-300 px-2 pt-4"},ve={key:0,class:"z-10 flex items-center text-sm text-success"},Ie=e("span",{class:"material-symbols-outlined mr-1"},"check_circle",-1),Ve={key:1,class:"z-10 flex items-center text-sm text-danger"},Ce=e("span",{class:"material-symbols-outlined mr-1"},"info",-1),Te={class:"text-end font-bold tracking-wider"},ze={key:0,class:"text-success"};function Ee(s,o,$e,Pe,Le,f){const y=c("RouterLink"),p=c("VField"),b=c("ErrorMessage"),k=c("VForm"),w=c("OrderRules");return l(),r("div",P,[n(y,{to:"/checkout",class:"mb-4 inline-block"},{default:g(()=>[L]),_:1}),e("div",U,[e("div",N,[j,n(k,{class:"rounded-md border bg-neutral-100 px-5 pb-7 pt-9",onSubmit:o[7]||(o[7]=t=>f.toPay())},{default:g(({errors:t})=>[e("div",q,[e("div",F,[S,n(p,{type:"text",class:m(["focus:border-primary m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":t.姓名,"border-neutral-300":!t.姓名}]),placeholder:"請輸入姓名",name:"姓名",id:"name",rules:"required",modelValue:s.userInfo.user.name,"onUpdate:modelValue":o[0]||(o[0]=a=>s.userInfo.user.name=a)},null,8,["class","modelValue"]),n(b,{class:"absolute right-0 text-sm text-danger",name:"姓名"}),t.姓名?(l(),r("span",M," error ")):!t.姓名&&s.userInfo.user.name?(l(),r("span",O," check_circle ")):d("",!0)]),e("div",R,[B,n(p,{type:"tel",class:m(["focus:border-primary m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":t.電話,"border-neutral-300":!t.電話}]),placeholder:"請輸入電話",name:"電話",id:"tel",rules:f.isTel,modelValue:s.userInfo.user.tel,"onUpdate:modelValue":o[1]||(o[1]=a=>s.userInfo.user.tel=a)},null,8,["class","rules","modelValue"]),n(b,{class:"absolute right-0 text-sm text-danger",name:"電話"}),t.電話?(l(),r("span",D," error ")):!t.電話&&s.userInfo.user.tel?(l(),r("span",A," check_circle ")):d("",!0)])]),e("div",G,[H,n(p,{type:"email",class:m(["focus:border-primary m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":t["E-mail"],"border-neutral-300":!t["E-mail"]}]),placeholder:"請輸入E-mail",name:"E-mail",id:"mail",rules:"email|required",modelValue:s.userInfo.user.email,"onUpdate:modelValue":o[2]||(o[2]=a=>s.userInfo.user.email=a)},null,8,["class","modelValue"]),n(b,{class:"absolute right-0 text-sm text-danger",name:"E-mail"}),t["E-mail"]?(l(),r("span",J," error ")):!t["E-mail"]&&s.userInfo.user.email?(l(),r("span",K," check_circle ")):d("",!0)]),e("div",Q,[W,n(p,{type:"text",class:m(["focus:border-primary m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none disabled:bg-neutral-100 disabled:text-gray-600",{"border-danger":t.地址,"border-neutral-300":!t.地址}]),placeholder:"請輸入地址",name:"地址",id:"address",rules:s.userInfo.user.address==="到店自取"?"required":"required|min:9",modelValue:s.userInfo.user.address,"onUpdate:modelValue":o[3]||(o[3]=a=>s.userInfo.user.address=a),disabled:s.userInfo.user.order.pickupMethod==="self"},null,8,["class","rules","modelValue","disabled"]),n(b,{class:"absolute right-0 text-sm text-danger",name:"地址"}),t.地址?(l(),r("span",X," error ")):!t.地址&&s.userInfo.user.address?(l(),r("span",Y," check_circle ")):d("",!0)]),e("div",Z,[ee,h(e("textarea",{type:"text",class:"focus:border-primary m-0 block min-h-[100px] w-full resize-none rounded border border-solid border-neutral-300 bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",placeholder:"若是有任何需求都可以留言備註唷！",id:"message","onUpdate:modelValue":o[4]||(o[4]=a=>s.userInfo.message=a)},null,512),[[_,s.userInfo.message]])]),e("div",se,[te,e("div",oe,[h(e("input",{type:"text",class:"focus:border-primary relative m-0 block w-[1px] min-w-0 flex-auto rounded-l border border-r-0 border-solid border-neutral-300 bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",placeholder:"輸入優惠券編號",id:"coupon","onUpdate:modelValue":o[5]||(o[5]=a=>s.userInfo.couponCode=a)},null,512),[[_,s.userInfo.couponCode]]),e("button",{type:"button",class:"rounded-r border-2 border-solid border-brown-300 bg-neutral-50 px-5 py-[6px] text-center text-sm font-normal leading-[1.6] text-brown-300 hover:border-brown-300 hover:bg-brown-300 hover:text-white",id:"coupon",onClick:o[6]||(o[6]=a=>s.useCoupon(s.userInfo.couponCode))}," 點我套用 "),s.status.coupon&&s.userInfo.couponCode?(l(),r("span",le," check_circle ")):s.userInfo.couponCode?(l(),r("p",re,[ae,i(" 未套用 ")])):d("",!0)])]),e("button",{type:"submit",class:"to-check z-10 ml-auto flex items-center rounded-full bg-brown-300 px-8 py-2 text-sm font-medium uppercase leading-normal tracking-wider text-white transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-0 disabled:bg-gray-300",disabled:Object.keys(t).length!==0||s.userInfo.user.address===""||s.userInfo.user.email===""||s.userInfo.user.name===""||s.userInfo.user.tel===""}," 前往結帳 ",8,ne)]),_:1})]),e("div",ie,[e("div",de,[e("div",ue,[ce,s.cartList&&s.cartList.length>=1?(l(),r("ul",me,[(l(!0),r(C,null,T(s.cartList,t=>(l(),r("li",{class:"flex gap-2 py-3 pl-4",key:t.id},[e("a",pe,[e("img",{class:"object-cover",src:t.product.imageUrl,alt:t.product.title},null,8,be)]),e("div",fe,[e("div",ge,[e("h4",he,u(t.product.title),1),e("p",_e,"x "+u(t.qty)+" "+u(t.product.unit),1)]),e("div",xe,[e("span",ye," 單價 NT "+u(s.$filters.currency(t.product.price))+" 元 ",1),e("span",ke,"NT "+u(s.$filters.currency(t.final_total))+" 元",1)])])]))),128))])):d("",!0),e("div",we,[s.status.coupon&&s.userInfo.couponCode?(l(),r("p",ve,[Ie,i(" 已套用優惠券 ")])):(l(),r("p",Ve,[Ce,i(" 尚未套用優惠券 ")])),e("p",Te,[i(" 共 NT "),e("span",{class:m({"mr-2 text-sm text-gray-400 line-through":s.finalTotalPrice!==s.cartTotalPrice&&s.status.coupon})},u(s.$filters.currency(s.cartTotalPrice)),3),s.finalTotalPrice!==s.cartTotalPrice&&s.status.coupon?(l(),r("span",ze,u(s.$filters.currency(s.finalTotalPrice)),1)):d("",!0),i(" 元 ")])])])])])]),n(w)])}const Me=v($,[["render",Ee]]);export{Me as default};
