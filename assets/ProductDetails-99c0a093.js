import{q as z,Q as I}from"./tw-elements.es.min-69e8dc80.js";import{N as S,S as j,a as V}from"./navigation-e648f4b3.js";import{c as B,m as x,b as _,r as y,o as l,d as r,e,f as g,w as b,k,j as D,n as p,F as w,i as v,h as m,t as a,g as n,l as M,v as q,z as F,s as U,u as A}from"./index-7d8cc5ea.js";import{a as H,p as C}from"./productStore-dd279607.js";import{S as O}from"./swalMixin-1ac3556f.js";import{c as P}from"./cartStore-a4d703fb.js";import{f as N}from"./favoriteStore-24331aba.js";import"./base-ae4ba7b0.js";const E={data(){return{productDetails:{},currentImages:"",currentImageOpacity:1,buyNum:1,cachePrice:0,modules:[S]}},computed:{...x(P,["cartList","cartTotalPrice","status","currentStep"]),...x(N,["favorite"]),...x(C,["productList"]),moreProductList(){const o=this.productDetails.category,i=this.productDetails.id,f=this.productList.filter(t=>t.id!==i&&t.category===o),c=this.productList.filter(t=>t.id!==i&&t.category!==o);return[...f,...c]}},watch:{$route(o){this.getProductDetails(o.params.id)}},methods:{..._(P,["delCartItem","updateCart","getCartList","updateCurrentStep","addToCart"]),..._(N,["toggleFavorite"]),..._(C,["getProducts"]),..._(F,["addLoadingItem","removeLoadingItem"]),async getProductDetails(o){var i,f;try{this.addLoadingItem("getProductDetails");const c=await H(o);this.productDetails=c,this.currentImages=c.imageUrl,this.cachePrice=c.price,document.title=`${c.title}｜三月兔－MarchHare Bakery`}catch(c){this.showSwalToast("error",(f=(i=c.response)==null?void 0:i.data)==null?void 0:f.message)}finally{this.removeLoadingItem("getProductDetails")}},changeCurrentImage(o){this.currentImageOpacity=0,setTimeout(()=>{this.currentImages=o,this.currentImageOpacity=1},150)},updateBuyNum(o){o===1||o===-1?this.buyNum+=o:o<=0&&(this.buyNum=1,this.cachePrice=this.productDetails.price),this.cachePrice=this.productDetails.price,this.cachePrice*=this.buyNum}},mounted(){z({Collapse:I});const{id:o}=this.$route.params;this.getProductDetails(o),this.getCartList(),this.getProducts()},components:{Swiper:j,SwiperSlide:V},mixins:[O]},Q={"data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true"},R={class:"container pb-14 pt-28"},G={class:"flex flex-col justify-center lg:flex-row"},J={class:"md:pr-10 lg:w-5/12 xl:w-4/12"},K=e("div",{class:"flex items-center"},[e("span",{class:"material-symbols-outlined mr-1"},"keyboard_double_arrow_left"),n(" 返回商品列表 ")],-1),W=["src","alt"],X={class:"flex flex-wrap gap-3"},Y=["src","alt"],Z=["onClick"],$=["src","alt"],ee={class:"pt-5 sm:pt-10 lg:w-5/12"},te={class:"mb-2 flex"},se={class:"flex w-11/12 items-center font-noto-serif text-3xl font-bold tracking-wide text-black sm:text-4xl"},oe={key:0,class:"mr-3 inline-block"},ie=e("p",{class:"flex h-[32px] w-[32px] items-center justify-center rounded-full bg-brown-300 font-sans text-sm font-medium text-white"}," 推 ",-1),le=[ie],re={class:"inline-block"},ae={key:0,class:"material-symbols-outlined align-middle text-danger",style:{"font-variation-settings":`'FILL' 1,
                    'opsz' 24`}},ne={key:1,class:"material-symbols-outlined align-middle text-brown-100"},ce={class:"mb-3 text-black-light"},de={key:0,class:"font-bold text-success"},ue={key:1,class:"ml-2 self-end rounded-full bg-success px-2 font-montserrat text-xs text-white"},pe=["innerHTML"],me=U('<button class="group relative mb-1 flex w-full items-center rounded-none border-0 pb-1 transition [overflow-anchor:none] hover:z-[2] focus:z-[3] focus:outline-none [&amp;:not([data-te-collapse-collapsed])]:[box-shadow:inset_0_-1px_0_rgba(229,231,235)]" type="button" data-te-collapse-init data-te-collapse-collapsed data-te-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo"><h3 class="relative mb-2 inline-block font-noto-serif text-xl font-medium after:absolute after:-left-1 after:-right-1 after:bottom-0 after:top-1/2 after:-z-[1] after:bg-warning"> 詳細內容 </h3><span class="ml-2 h-5 w-5 shrink-0 rotate-[-180deg] transition-transform duration-200 ease-in-out group-[[data-te-collapse-collapsed]]:mr-0 group-[[data-te-collapse-collapsed]]:rotate-0 group-[[data-te-collapse-collapsed]]:fill-[#212529] motion-reduce:transition-none"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path></svg></span></button>',1),fe={id:"collapseTwo",class:"!visible mb-4 mt-2 hidden","data-te-collapse-item":"","aria-labelledby":"headingTwo","data-te-parent":"#accordionExample"},ge=["innerHTML"],be={class:"mb-6"},he=e("h3",{class:"relative mb-4 inline-block font-noto-serif text-xl font-medium after:absolute after:-left-1 after:-right-1 after:bottom-0 after:top-1/2 after:-z-[1] after:bg-warning"}," 購買數量 ",-1),_e={class:"mb-2 flex items-center"},xe=["disabled"],ye=e("span",{class:"hidden pl-2 text-sm text-gray-400 sm:inline-block"},"個",-1),we=e("span",{class:"material-symbols-outlined pl-1 align-bottom text-2xl text-brown-300"},"add",-1),ve=[we],ke={class:"flex justify-between max-[460px]:flex-col min-[460px]:items-center lg:items-start"},De={class:"text-sm max-[460px]:mb-3 lg:mb-0 lg:self-end"},Ce={class:"mx-1 font-noto-serif text-lg font-bold tracking-wider"},Pe={class:"flex gap-4"},Ne=["disabled"],Le={key:0,class:"absolute bottom-[105%] left-0 right-0 flex items-center justify-center gap-1 text-danger"},Te=e("span",{class:"material-symbols-outlined text-lg"},"error",-1),ze={class:"mb-4 rounded-lg border-2 border-dotted border-gray-300 px-5 py-3"},Ie=e("h4",{class:"mb-2"},"消費滿 NT $1,500，享有免運費優惠",-1),Se={class:"flex flex-col justify-between sm:flex-row"},je=e("p",{class:"text-sm text-black-light"},[n(" [付款] 信用卡(一次付清)、貨到付款、ATM 轉帳 "),e("br"),n(" [運送] 黑貓低溫宅配、工作室自取 ")],-1),Ve=e("span",{class:"material-symbols-outlined mr-1 hidden rotate-45 align-middle text-xl text-info xl:inline-block"}," link ",-1),Be=e("p",{class:"inline-block border-b border-info font-bold leading-[22px] text-info"},"常見問題",-1),Me={class:"bg-neutral-50 bg-opacity-50 pb-[72px] sm:pt-4"},qe={class:"container"},Fe=e("h3",{class:"mb-10 text-center font-maru text-[40px] font-medium tracking-widest text-brown-500"},"更多商品⋯",-1),Ue={class:"productCard h-full w-full px-2 xl:px-3"},Ae={class:"relative flex h-full flex-col overflow-hidden rounded-xl border"},He={class:"card-img relative aspect-square overflow-hidden"},Oe=["src","alt"],Ee=["onClick"],Qe={key:0,class:"material-symbols-outlined text-3xl text-red-400",style:{"font-variation-settings":`'FILL' 1,
                          'opsz' 24`}},Re={key:1,class:"material-symbols-outlined text-3xl text-red-400"},Ge={key:0,class:"absolute left-0 top-0 z-10 p-4"},Je=e("p",{class:"flex h-[36px] w-[36px] items-center justify-center rounded-full bg-brown-300 text-sm font-medium text-white"}," 推 ",-1),Ke=[Je],We=e("div",{class:"view-detail absolute left-1/2 top-1/2 z-[5] hidden -translate-x-1/2 -translate-y-1/4"},[e("p",{href:"#",class:"z-5 flex items-center whitespace-nowrap py-2 pl-8 pr-6 text-sm font-medium uppercase leading-normal tracking-wider text-white"},[n(" 查看商品資訊 "),e("span",{class:"material-symbols-outlined ml-1"},"keyboard_double_arrow_right")])],-1),Xe={class:"flex min-h-[150px] grow flex-col justify-between p-5"},Ye={class:"mb-1 text-lg font-medium text-black lg:text-xl"},Ze={class:"-ml-1 flex flex-wrap gap-x-1 text-sm text-gray-400"},$e={class:"z-10 px-1 py-[1px]"},et={class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"},tt={class:"flex flex-col"},st={class:"flex items-center"},ot={key:0,class:"op block rounded-full bg-success px-2 font-montserrat text-[10px] text-white md:hidden lg:block"},it=["onClick"];function lt(o,i,f,c,t,u){const h=y("RouterLink"),L=y("swiper-slide"),T=y("swiper");return l(),r("main",Q,[e("section",R,[e("div",G,[e("div",J,[g(h,{to:"/shop",class:"mb-4 inline-block"},{default:b(()=>[K]),_:1}),e("img",{src:t.currentImages,alt:t.productDetails.title,class:"mb-4 aspect-square w-full rounded-lg object-cover",style:k({opacity:t.currentImageOpacity,transition:"opacity 0.15s"})},null,12,W),e("ul",X,[e("li",null,[e("a",{href:"#",onClick:i[0]||(i[0]=D(s=>u.changeCurrentImage(t.productDetails.imageUrl),["prevent"]))},[e("img",{src:t.productDetails.imageUrl,alt:t.productDetails.title+1,class:p(["aspect-square w-[106px] rounded-lg object-cover",{"opacity-50":t.currentImages===t.productDetails.imageUrl}])},null,10,Y)])]),(l(!0),r(w,null,v(t.productDetails.imagesUrl,(s,d)=>(l(),r("li",{key:s},[e("a",{href:"#",onClick:D(rt=>u.changeCurrentImage(s),["prevent"])},[e("img",{src:s,alt:t.productDetails.title+(d+2),class:p(["aspect-square w-[106px] rounded-lg object-cover",{"opacity-50":t.currentImages===s}])},null,10,$)],8,Z)]))),128))])]),e("div",ee,[e("div",te,[e("div",se,[t.productDetails.is_recommend?(l(),r("div",oe,le)):m("",!0),e("h2",re,a(t.productDetails.title),1)]),e("button",{type:"button",class:p(["ml-auto inline-block h-[40px] w-[40px] rounded-full border-2 border-brown-100",o.favorite.some(s=>s.id===t.productDetails.id)?"border-danger":"border-brown-100"]),title:"加入收藏",onClick:i[1]||(i[1]=s=>o.toggleFavorite(t.productDetails))},[o.favorite.some(s=>s.id===t.productDetails.id)?(l(),r("span",ae," favorite ")):(l(),r("span",ne,"favorite"))],2)]),e("p",ce,[e("span",{class:p({"mr-2 text-gray-400 line-through":t.productDetails.origin_price!==t.productDetails.price})}," NT "+a(t.productDetails.origin_price)+" 元 ",3),t.productDetails.origin_price!==t.productDetails.price?(l(),r("span",de," NT "+a(t.productDetails.price)+" 元 ",1)):m("",!0),n(" / "+a(t.productDetails.unit)+" ",1),t.productDetails.origin_price!==t.productDetails.price?(l(),r("span",ue,"SALE ")):m("",!0)]),e("div",{class:"mb-4",innerHTML:t.productDetails.description},null,8,pe),e("div",null,[me,e("div",fe,[e("div",{innerHTML:t.productDetails.content,class:"ingredients-list !visible",id:"collapseOne","data-te-collapse-item":"","data-te-collapse-show":""},null,8,ge)])]),e("div",be,[he,e("div",_e,[e("button",{type:"button",class:"pr-1",onClick:i[2]||(i[2]=s=>u.updateBuyNum(-1)),disabled:t.buyNum===1},[e("span",{class:"material-symbols-outlined align-bottom text-2xl text-brown-300",style:k({color:t.buyNum===1?"#d1d5db":""})}," remove ",4)],8,xe),e("label",null,[M(e("input",{type:"number",min:"1",class:"max-w-[60px] border bg-transparent pb-[2px] pt-[1px] text-center outline-none focus:outline-none","onUpdate:modelValue":i[3]||(i[3]=s=>t.buyNum=s),onChange:i[4]||(i[4]=s=>u.updateBuyNum(t.buyNum))},null,544),[[q,t.buyNum]])]),ye,e("button",{type:"button",onClick:i[5]||(i[5]=s=>u.updateBuyNum(1))},ve)]),e("div",ke,[e("p",De,[n(" 總計 "),e("span",Ce,a(t.cachePrice),1),n(" 元 ")]),e("div",Pe,[g(h,{to:"/checkout/cart",type:"button",class:"z-10 flex items-center rounded-full border border-brown-300 px-8 py-2 text-sm font-medium uppercase leading-normal tracking-wider text-brown-300 transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-1"},{default:b(()=>[n(" 前往結帳 ")]),_:1}),e("button",{type:"button",class:"relative z-10 flex items-center rounded-full bg-brown-300 px-8 py-2 text-sm font-medium uppercase leading-normal tracking-wider text-white transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-0 disabled:bg-gray-300",onClick:i[6]||(i[6]=s=>o.addToCart(t.productDetails,t.buyNum)),disabled:!t.productDetails.is_enabled},[n(" 加入購物車 "),t.productDetails.is_enabled?m("",!0):(l(),r("span",Le,[Te,n(" 目前無法購買 ")]))],8,Ne)])])]),e("div",ze,[Ie,e("div",Se,[je,g(h,{to:"/faq",target:"_blank",class:"self-end text-sm"},{default:b(()=>[Ve,Be]),_:1})])])])])]),e("section",Me,[e("div",qe,[Fe,g(T,{"data-aos":"fade-up","data-aos-duration":"800","data-aos-offset":"200",navigation:!0,slidesPerView:4,loop:!0,modules:t.modules,breakpoints:{0:{slidesPerView:1},500:{slidesPerView:2},768:{slidesPerView:3},1550:{slidesPerView:4},1920:{slidesPerView:4}},class:"mySwiper relative lg:px-20 before:lg:absolute before:lg:bottom-0 before:lg:right-0 before:lg:top-0 before:lg:z-[10] before:lg:w-20 before:lg:bg-neutral-50 after:lg:absolute after:lg:bottom-0 after:lg:top-0 after:lg:z-[10] after:lg:-ml-20 after:lg:w-20 after:lg:bg-neutral-50"},{default:b(()=>[(l(!0),r(w,null,v(u.moreProductList,s=>(l(),A(L,{key:s.id,class:"h-auto"},{default:b(()=>[e("div",Ue,[e("div",Ae,[e("div",He,[e("img",{class:"relative h-full w-full object-cover",src:s.imageUrl,alt:s.title},null,8,Oe),e("button",{type:"button",class:"absolute right-0 top-0 z-10 p-4",onClick:d=>o.toggleFavorite(s)},[o.favorite.some(d=>d.id===s.id)?(l(),r("span",Qe," favorite ")):(l(),r("span",Re,"favorite"))],8,Ee),s.is_recommend?(l(),r("div",Ge,Ke)):m("",!0),We]),e("div",Xe,[e("div",null,[e("h3",Ye,a(s.title),1),e("div",Ze,[e("span",$e,"# "+a(s.category),1),(l(!0),r(w,null,v(s.tag,d=>(l(),r("span",{class:"z-10 px-1 py-[1px]",key:d},"# "+a(d),1))),128))])]),e("div",et,[e("div",tt,[e("div",st,[e("span",{class:p(["md::text-xl mr-2 whitespace-nowrap font-medium text-black-light",{"text-success":s.price!==s.origin_price}])}," NT "+a(o.$filters.currency(s.price)),3),s.price!==s.origin_price?(l(),r("span",ot,"SALE ")):m("",!0)]),e("span",{class:p(["text-xs text-gray-500 line-through",{hidden:s.price===s.origin_price}])}," NT "+a(o.$filters.currency(s.origin_price)),3)]),e("button",{type:"button",class:"btn-add-cart active:bg-cerulean-700 z-10 flex w-fit items-center self-end whitespace-nowrap rounded-full bg-brown-300 px-6 py-2 text-sm font-medium uppercase leading-normal tracking-wider text-white transition duration-150 ease-in-out hover:opacity-80 focus:outline-none focus:ring-0",onClick:d=>o.addToCart(s,1)}," 加入購物車 ",8,it)])]),g(h,{to:`/product/${s.id}`,class:"after:absolute after:inset-0 after:left-0 after:right-0 after:top-0 after:z-[9]"},null,8,["to"])])])]),_:2},1024))),128))]),_:1},8,["modules"])])])])}const gt=B(E,[["render",lt]]);export{gt as default};
