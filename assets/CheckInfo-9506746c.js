import{_ as v,m as V,b as I,r as c,o as l,d as a,f as r,w as g,e,F as C,i as T,h as d,g as i,n as b,t as u,c as _,l as h,v as x,j as z}from"./index-28469c10.js";import{O as E,_ as $}from"./double-tail-clip-3b241e16.js";import"./tw-elements.es.min-5f64f089.js";const P={data(){return{}},computed:{...V(_,["cartList","cartTotalPrice","status","finalTotalPrice","userInfo"])},methods:{...I(_,["getCartList","updateCurrentStep","pushUserInfo","useCoupon"]),isTel(t){return/^(09[0-9]{8}|0[0-9]{9})$/.test(t)?!0:"請填寫正確的電話號碼"},toPay(){this.pushUserInfo(this.userInfo),this.$router.replace("/checkout/pay")}},created(){this.updateCurrentStep(2),this.getCartList(),this.userInfo.user.order.pickupMethod===void 0&&this.$router.replace("/checkout/cart")},components:{OrderRules:E}},L={class:"container w-full mb-12 xl:10/12 2xl:w-7/12"},U=e("div",{class:"flex items-center"},[e("span",{class:"mr-1 material-symbols-outlined"}," keyboard_double_arrow_left "),i("返回上一步 ")],-1),j={class:"flex flex-col-reverse gap-8 lg:flex-row lg:gap-0"},N={class:"relative w-full lg:pr-2 lg:w-1/2"},F=e("img",{class:"absolute -top-3 right-10",src:$,alt:"tail-clip"},null,-1),M={class:"flex gap-2 mb-4"},O={class:"relative w-1/2"},S=e("label",{for:"name",class:"block mb-1"},[i("收件人姓名 "),e("span",{class:"text-danger"}," * ")],-1),q={key:0,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-danger"},R={key:1,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-success"},B={class:"relative w-1/2"},D=e("label",{for:"tel",class:"block mb-1"},[i("收件人電話 "),e("span",{class:"text-danger"}," * ")],-1),A={key:0,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-danger"},G={key:1,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-success"},H={class:"relative mb-4"},J=e("label",{for:"mail",class:"block mb-1"},[i("E-mail"),e("span",{class:"text-danger"}," *")],-1),K={key:0,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-danger"},Q={key:1,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-success"},W={class:"relative mb-4"},X=e("label",{for:"address",class:"block mb-1"},[i("地址"),e("span",{class:"text-danger"}," *")],-1),Y={key:0,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-danger"},Z={key:1,class:"absolute bottom-[12%] right-2 material-symbols-outlined text-success"},ee={class:"mb-4"},te=e("label",{for:"message",class:"block mb-1"},"留言",-1),se={class:"mb-10"},oe=e("label",{for:"coupon",class:"block mb-1"},"優惠券",-1),le={class:"relative flex flex-wrap items-stretch"},ae={key:0,class:"absolute mr-1 text-success material-symbols-outlined z-10 right-[22%] top-[20%]"},ne={key:1,class:"absolute text-danger z-10 right-[22%] top-[20%] flex items-center text-sm"},re=e("span",{class:"mr-1 material-symbols-outlined"}," info ",-1),ie=["disabled"],de={class:"w-full lg:pl-2 lg:w-1/2"},ue={class:"bg-[rgb(255,255,255,0.95)] rounded-md border"},ce={class:"px-2 py-4 text-black-light"},be=e("div",{class:"flex pb-3 pl-2 mb-2 border-b-2 border-gray-300 border-dotted"},[e("h4",{class:"mr-1"},"購物車列表")],-1),pe={key:0,class:"flex flex-col pb-3 mb-2 cart-list h-[473px] overflow-y-auto"},me={class:"flex items-center w-1/4 aspect-square grow"},fe=["src","alt"],ge={class:"flex flex-col justify-between w-3/4 px-2 grow"},_e={class:"flex items-center justify-between"},he={class:"inline-block font-medium text-lg truncate max-w-[90%]"},xe={class:"inline-block text-sm"},ye={class:"flex items-center justify-between"},ke={class:"text-xs text-gray-400"},we={class:"flex justify-between px-2 pt-4 mt-3 border-t-2 border-gray-300 border-dotted"},ve={key:0,class:"z-10 flex items-center text-sm text-success"},Ve=e("span",{class:"mr-1 material-symbols-outlined"}," check_circle ",-1),Ie={key:1,class:"z-10 flex items-center text-sm text-danger"},Ce=e("span",{class:"mr-1 material-symbols-outlined"}," info ",-1),Te={class:"font-bold tracking-wider text-end"},ze={key:0,class:"text-success"};function Ee(t,o,$e,Pe,Le,f){const y=c("RouterLink"),p=c("VField"),m=c("ErrorMessage"),k=c("VForm"),w=c("OrderRules");return l(),a("div",L,[r(y,{to:"/checkout",class:"inline-block mb-4"},{default:g(()=>[U]),_:1}),e("div",j,[e("div",N,[F,r(k,{class:"px-5 border rounded-md pt-9 pb-7 bg-neutral-100",onSubmit:o[7]||(o[7]=s=>f.toPay())},{default:g(({errors:s})=>[e("div",M,[e("div",O,[S,r(p,{type:"text",class:b(["m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":s.姓名,"border-neutral-300":!s.姓名}]),placeholder:"請輸入姓名",name:"姓名",id:"name",rules:"required",modelValue:t.userInfo.user.name,"onUpdate:modelValue":o[0]||(o[0]=n=>t.userInfo.user.name=n)},null,8,["class","modelValue"]),r(m,{class:"absolute right-0 text-sm text-danger",name:"姓名"}),s.姓名?(l(),a("span",q," error ")):!s.姓名&&t.userInfo.user.name?(l(),a("span",R,"check_circle")):d("",!0)]),e("div",B,[D,r(p,{type:"tel",class:b(["m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":s.電話,"border-neutral-300":!s.電話}]),placeholder:"請輸入電話",name:"電話",id:"tel",rules:f.isTel,modelValue:t.userInfo.user.tel,"onUpdate:modelValue":o[1]||(o[1]=n=>t.userInfo.user.tel=n)},null,8,["class","rules","modelValue"]),r(m,{class:"absolute right-0 text-sm text-danger",name:"電話"}),s.電話?(l(),a("span",A," error ")):!s.電話&&t.userInfo.user.tel?(l(),a("span",G,"check_circle")):d("",!0)])]),e("div",H,[J,r(p,{type:"email",class:b(["m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",{"border-danger":s["E-mail"],"border-neutral-300":!s["E-mail"]}]),placeholder:"請輸入E-mail",name:"E-mail",id:"mail",rules:"email|required",modelValue:t.userInfo.user.email,"onUpdate:modelValue":o[2]||(o[2]=n=>t.userInfo.user.email=n)},null,8,["class","modelValue"]),r(m,{class:"absolute right-0 text-sm text-danger",name:"E-mail"}),s["E-mail"]?(l(),a("span",K," error ")):!s["E-mail"]&&t.userInfo.user.email?(l(),a("span",Q,"check_circle")):d("",!0)]),e("div",W,[X,r(p,{type:"text",class:b(["m-0 block w-full rounded border border-solid bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none disabled:bg-neutral-100 disabled:text-gray-600",{"border-danger":s.地址,"border-neutral-300":!s.地址}]),placeholder:"請輸入地址",name:"地址",id:"address",rules:"required",modelValue:t.userInfo.user.address,"onUpdate:modelValue":o[3]||(o[3]=n=>t.userInfo.user.address=n),disabled:t.userInfo.user.pickupMethod==="self"},null,8,["class","modelValue","disabled"]),r(m,{class:"absolute right-0 text-sm text-danger",name:"地址"}),s.地址?(l(),a("span",Y," error ")):!s.地址&&t.userInfo.user.address?(l(),a("span",Z,"check_circle")):d("",!0)]),e("div",ee,[te,h(e("textarea",{type:"text",class:"min-h-[100px] resize-none m-0 block w-full rounded border border-solid border-neutral-300 bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none",placeholder:"若是有任何需求都可以留言備註唷！",id:"message","onUpdate:modelValue":o[4]||(o[4]=n=>t.userInfo.message=n)},null,512),[[x,t.userInfo.message]])]),e("div",se,[oe,e("div",le,[h(e("input",{type:"text",class:"relative m-0 block w-[1px] min-w-0 flex-auto rounded-l border border-solid border-neutral-300 bg-neutral-50 bg-clip-padding px-3 py-[6px] text-base font-normal leading-[1.6] text-neutral-700 outline-none transition duration-200 ease-in-out focus:z-[3] focus:border-primary focus:text-neutral-700 focus:shadow-[inset_0_0_0_1px_rgb(59,113,202)] focus:outline-none border-r-0",placeholder:"輸入優惠券編號",id:"coupon","onUpdate:modelValue":o[5]||(o[5]=n=>t.userInfo.couponCode=n)},null,512),[[x,t.userInfo.couponCode]]),e("button",{type:"button",class:"rounded-r border-2 border-solid border-brown-300 text-brown-300 px-5 py-[6px] text-center text-sm font-normal leading-[1.6] hover:bg-brown-300 hover:text-white hover:border-brown-300 bg-neutral-50",id:"coupon",onClick:o[6]||(o[6]=z(n=>t.useCoupon(t.userInfo.couponCode),["prevent"]))},"點我套用"),t.status.coupon&&t.userInfo.couponCode?(l(),a("span",ae," check_circle ")):t.userInfo.couponCode?(l(),a("p",ne,[re,i(" 未套用 ")])):d("",!0)])]),e("button",{type:"submit",class:"z-10 flex items-center px-8 py-2 ml-auto text-sm font-medium leading-normal tracking-wider text-white uppercase transition duration-150 ease-in-out rounded-full to-check bg-brown-300 focus:outline-none focus:ring-0 hover:opacity-80 disabled:bg-gray-300",disabled:Object.keys(s).length!==0||Object.keys(t.userInfo.user).length<4},"前往結帳 ",8,ie)]),_:1})]),e("div",de,[e("div",ue,[e("div",ce,[be,t.cartList&&t.cartList.length>=1?(l(),a("ul",pe,[(l(!0),a(C,null,T(t.cartList,s=>(l(),a("li",{class:"flex gap-2 py-3 pl-4",key:s.id},[e("a",me,[e("img",{class:"object-cover",src:s.product.imageUrl,alt:s.product.title},null,8,fe)]),e("div",ge,[e("div",_e,[e("h4",he,u(s.product.title),1),e("p",xe,"x "+u(s.qty)+" "+u(s.product.unit),1)]),e("div",ye,[e("span",ke,"單價 NT "+u(t.$filters.currency(s.product.price))+" 元",1),e("span",null,"NT "+u(t.$filters.currency(s.final_total))+" 元",1)])])]))),128))])):d("",!0),e("div",we,[t.status.coupon&&t.userInfo.couponCode?(l(),a("p",ve,[Ve,i("已套用優惠券")])):(l(),a("p",Ie,[Ce,i("尚未套用優惠券")])),e("p",Te,[i("共 NT "),e("span",{class:b({"line-through text-sm text-gray-400 mr-2":t.finalTotalPrice!==t.cartTotalPrice&&t.status.coupon})},u(t.$filters.currency(t.cartTotalPrice)),3),t.finalTotalPrice!==t.cartTotalPrice&&t.status.coupon?(l(),a("span",ze,u(t.$filters.currency(t.finalTotalPrice)),1)):d("",!0),i(" 元")])])])])])]),r(w)])}const Fe=v(P,[["render",Ee]]);export{Fe as default};
