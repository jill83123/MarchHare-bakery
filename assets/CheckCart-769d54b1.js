import{_ as u}from"./tw-elements.es.min-5f64f089.js";import{_ as y,m as k,b as v,r as w,o as l,c as d,d as t,F as x,i as C,t as n,k as h,K as L,g as o,f as a,h as p,e as M,w as S,n as _,j as $,v as T}from"./index-200782e0.js";import{c as m}from"./cartStore-97a94179.js";import{S as q}from"./swalMixin-3d9d71cc.js";const N={data(){return{pickupMethod:""}},computed:{...k(m,["cartList","cartTotalPrice","status","currentStep","userInfo"])},methods:{...v(m,["delCartItem","updateCart","getCartList","updateCurrentStep","checkCartList"]),cancelOrder(){this.delCartItem("all"),this.$router.push("/shop")}},created(){this.getCartList(),this.updateCurrentStep(1)},mounted(){if(this.$nextTick(()=>{const s=this.$refs.pickupMethodSelect;u.getOrCreateInstance(s)}),this.pickupMethod===""){const s=this.cartList.findIndex(i=>i.id==="-Nfviy3OLgcT7GnSUqUV");s>-1&&this.cartList.splice(s,1)}},beforeUnmount(){this.$refs.pickupMethodSelect&&new u(this.$refs.pickupMethodSelect).dispose()},mixins:[q]},V={key:0,"data-aos":"fade-up","data-aos-duration":"800","data-aos-once":"true",class:"container flex flex-col"},U={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},j={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},z={class:"overflow-hidden"},O={class:"min-w-full mb-6 text-sm text-left"},B=t("thead",{class:"font-medium text-black border-b border-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"w-[5%] px-1 py-4 md:px-4 lg:px-6"},"#"),t("th",{scope:"col",class:"md:w-[55%] px-1 py-4 md:px-4 lg:px-6"},"清單"),t("th",{scope:"col",class:"max-[479px]:w-[20%] md:w-[15%] px-1 py-4 md:px-4 lg:px-6"},"小計"),t("th",{scope:"col",class:"w-[15%] px-1 py-4 md:px-4 lg:px-6"},"編輯"),t("th",{scope:"col",class:"w-[10%] px-0 py-4 md:px-4 lg:px-6"},"刪除")])],-1),E={class:"text-black-light"},P={class:"pl-2 min-w-[480px]:px-2 py-4 font-medium md:px-4 lg:px-6"},A={class:"px-2 py-4 md:px-4 lg:px-6"},D={class:"flex flex-col gap-2 md:gap-8 min-[480px]:flex-row"},F=["src","alt"],H={class:"flex flex-col justify-center"},R={class:"mb-2"},G={class:"block mr-1 font-medium text-black lg:text-xl"},K={key:0,class:"text-[8px] sm:text-[10px] px-2 ml-1 text-white rounded-full font-montserrat op bg-success"},J=["innerHTML"],Q={class:"px-0 sm:px-2 py-4 text-xs tracking-wider max-[480px]:text-center sm:text-left sm:text-sm md:px-4 lg:px-6 whitespace-nowrap"},W=t("span",{class:"hidden sm:inline-block"},"NT",-1),X={class:"min-w-[480px]:px-2 py-4 md:px-4 lg:px-6"},Y={class:"flex items-center"},Z=["onClick","disabled"],I=["onUpdate:modelValue","onChange"],tt={class:"hidden pl-2 text-sm text-gray-400 sm:inline-block"},et=["onClick","disabled"],st=t("span",{class:"pl-1 text-xl align-bottom text-brown-300 material-symbols-outlined"},"add",-1),ot=[st],nt={class:"px-1 py-4 md:px-4 lg:px-6"},it=["onClick"],lt=t("span",{class:"align-bottom material-symbols-outlined"}," delete ",-1),dt=[lt],ct={class:"text-base font-bold tracking-wider border-t border-gray-200 text-brown-500"},rt={class:"px-1 py-4 md:px-4 lg:px-6",colspan:"2"},at={class:"flex justify-between first-letter:items-start"},pt={class:"hidden sm:block"},ut={class:"w-[170px] text-gray-500"},xt=t("option",{disabled:"",selected:""},"請選擇取貨方式",-1),ht=t("option",{value:"delivery"},"宅配",-1),_t=t("option",{value:"self"},"到店自取",-1),mt=[xt,ht,_t],ft={class:"px-1 py-4 max-[480px]:text-center md:px-4 lg:px-6",colspan:"3"},bt={class:"-ml-2 text-sm"},gt=t("div",{class:"flex justify-center"},null,-1),yt=["disabled"],kt={key:1,class:"flex flex-col justify-center py-14"},vt={class:"text-center"},wt=t("br",null,null,-1);function Ct(s,i,Lt,Mt,c,f){const b=w("RouterLink");return l(),d(x,null,[s.cartList.length>0?(l(),d("div",V,[t("div",U,[t("div",j,[t("div",z,[t("table",O,[B,t("tbody",E,[(l(!0),d(x,null,C(s.cartList,(e,g)=>(l(),d("tr",{class:"border-b border-gray-200 hover:bg-neutral-100",key:e.id},[t("td",P,n(g+1),1),t("td",A,[t("div",D,[t("img",{class:"w-full min-[480px]:w-[130px] object-cover",src:e.product.imageUrl,alt:e.product.title},null,8,F),t("div",H,[t("div",R,[t("h4",G,[o(n(e.product.title)+" ",1),e.product.price!==e.product.origin_price?(l(),d("span",K,"SALE")):p("",!0)]),t("p",{class:_(["inline-block text-xs tracking-wider text-gray-500",{"line-through mr-2":e.product.price!==e.product.origin_price}])},[o("NT "),t("span",null,n(s.$filters.currency(e.product.origin_price)),1),o(" 元")],2),e.product.price!==e.product.origin_price?(l(),d("p",{key:0,class:_(["inline-block text-xs tracking-wider text-gray-500",{" text-success font-bold":e.product.price!==e.product.origin_price}])},[o("NT "),t("span",null,n(s.$filters.currency(e.product.price)),1),o(" 元")],2)):p("",!0)]),t("div",{innerHTML:e.product.description,class:"hidden lg:block"},null,8,J)])])]),t("td",Q,[t("span",null,[W,o(" "+n(s.$filters.currency(e.final_total))+" 元",1)])]),t("td",X,[t("div",Y,[t("button",{class:"pr-1",onClick:a(r=>s.updateCart(e.id,e.qty>1?e.qty-1:1),["prevent"]),disabled:s.status.updateIcon===e.id||e.qty===1},[t("span",{class:"text-xl align-bottom text-brown-300 material-symbols-outlined",style:$({color:e.qty===1?"#d1d5db":""})},"remove",4)],8,Z),h(t("input",{type:"text",class:"outline-none focus:outline-none max-w-[40px] bg-transparent border text-center","onUpdate:modelValue":r=>e.qty=r,onChange:r=>s.updateCart(e.id,e.qty===0||e.qty===""?1:e.qty)},null,40,I),[[T,e.qty]]),t("span",tt,n(e.product.unit),1),t("button",{onClick:a(r=>s.updateCart(e.id,e.qty+1),["prevent"]),disabled:s.status.updateIcon===e.id},ot,8,et)])]),t("td",nt,[t("button",{class:"self-end hover:text-danger",onClick:a(r=>s.showSwalCheck("warning","真的要刪除嗎",()=>s.delCartItem("one",e.id)),["prevent","stop"])},dt,8,it)])]))),128))]),t("tfoot",ct,[t("td",rt,[t("div",at,[t("span",pt,n(s.cartList.length)+" 個商品 ",1),t("div",ut,[h(t("select",{"data-te-select-init":"","data-te-class-select-Label":"data-[te-input-state-active]:scale-1 absolute top-[18%] left-[5%] pointer-events-none","onUpdate:modelValue":i[0]||(i[0]=e=>c.pickupMethod=e),ref:"pickupMethodSelect"},mt,512),[[L,c.pickupMethod]])])])]),t("td",ft,[o(" 共 NT "+n(c.pickupMethod==="delivery"?`${s.$filters.currency(s.cartTotalPrice+80)}`:s.$filters.currency(s.cartTotalPrice))+" 元 ",1),t("p",bt,n(c.pickupMethod==="delivery"?"（含運費 80 元）":""),1)])])]),gt,t("button",{type:"button",class:"z-10 flex items-center px-8 py-2 mx-auto mb-2 font-medium leading-normal tracking-wider text-white uppercase transition duration-150 ease-in-out rounded-full text to-check bg-brown-300 focus:outline-none focus:ring-0 hover:opacity-80 disabled:bg-gray-300",onClick:i[1]||(i[1]=a(e=>s.checkCartList(this.pickupMethod),["prevent"])),disabled:!c.pickupMethod},"確認商品 ",8,yt),t("button",{type:"button",class:"z-10 flex items-center px-8 py-2 mx-auto mb-10 text-sm font-medium leading-normal tracking-wider text-gray-500 uppercase transition duration-150 ease-in-out rounded-full focus:outline-none focus:ring-1 hover:opacity-80",onClick:i[2]||(i[2]=a(e=>f.cancelOrder(),["prevent"]))},"取消購買")])])])])):p("",!0),s.cartList.length===0?(l(),d("div",kt,[t("p",vt,[o("目前購物車是空的"),wt,o("快來 "),M(b,{to:"/shop",type:"button",class:"z-10 items-center inline-block mx-1 font-medium leading-normal tracking-wider uppercase transition duration-150 ease-in-out border-b text-brown-300 border-brown-300 hover:opacity-80"},{default:S(()=>[o("點我")]),_:1}),o(" 進行選購吧！")])])):p("",!0)],64)}const Nt=y(N,[["render",Ct]]);export{Nt as default};
