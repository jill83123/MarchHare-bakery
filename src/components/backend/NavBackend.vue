<template>
  <button class="fixed top-0 left-0 p-3 lg:hidden" type="button" data-te-offcanvas-toggle data-te-target="#offcanvasNav"
    ><svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="#859FAF"
      class="h-7 w-7"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg
  ></button>
  <nav
    class="lg:visible lg:block fixed top-0 bottom-0 left-0 right-0 w-[300px] text-white shadow-sm bg-cerulean py-10 [&[data-te-offcanvas-show]]:transform-none transition duration-300 ease-in-out z-[1045] -translate-x-full lg:translate-x-0 invisible"
    id="offcanvasNav"
    data-te-offcanvas-init
  >
    <div class="flex flex-col h-full gap-4">
      <RouterLink to="/" class="flex items-center py-3 px-9">
        <svg width="45" height="36" viewBox="0 0 45 36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M3.90026 11.8335C4.84117 11.0854 5.64971 10.3272 6.88935 10.4777C7.4891 7.88766 8.76497 5.6196 10.0702 3.39139C11.839 0.371659 14.4328 -0.372618 17.6513 1.0704C18.1076 1.275 18.4425 1.25699 18.8576 1.02086C19.3252 0.754871 19.8223 0.523956 20.3313 0.350405C23.7321 -0.809106 26.3503 0.988576 26.4399 4.56756C26.4625 5.47006 26.3278 6.3765 26.2648 7.29074C27.1113 7.69862 27.3152 6.98741 27.6527 6.56117C30.3668 3.13399 33.5312 3.43512 36.0038 7.0603C36.785 8.20564 37.817 9.59875 39.9081 9.23416C42.3848 8.8023 44.5817 10.6797 44.9035 13.2709C45.3302 16.7067 44.4296 20.5559 40.4196 22.3014C38.0042 23.3528 35.7061 24.5644 33.675 26.3877C30.5756 29.17 26.9563 30.5779 22.8119 28.6418C19.5115 36.0791 15.1059 37.49 9.79528 32.8281C7.59532 34.3708 5.32261 34.717 2.92448 33.0565C0.189812 31.1631 -0.549716 28.1167 1.19157 25.2366C1.56632 24.6168 1.89255 24.1805 1.42175 23.365C-0.853927 19.4234 -0.397886 16.2632 2.79092 12.958C3.12922 12.6073 3.46786 12.257 3.90026 11.8335ZM13.1659 10.2553C14.1808 8.21974 15.1955 6.18411 16.2106 4.14866C16.7566 3.05381 16.4167 2.52889 15.1953 2.47471C13.7354 2.40994 12.6849 3.0641 11.9631 4.26427C10.9297 5.98269 9.99759 7.75827 9.31827 9.65044C9.05314 10.389 8.61453 10.8574 7.96058 11.3479C5.94867 12.8569 3.7778 14.2382 2.6758 16.6927C1.68288 18.9043 1.84965 20.8499 3.53199 22.6836C4.95447 24.2341 6.65128 25.1493 8.72612 25.4079C9.44573 25.4976 10.0088 25.8613 9.98389 26.6371C9.95525 27.5274 9.23714 27.5285 8.55578 27.562C7.07327 27.6349 5.82833 26.9783 4.56071 26.3559C4.03841 26.0994 3.42184 25.7078 2.98509 26.4306C2.30414 27.5575 2.11892 28.7686 2.75821 29.9862C3.45913 31.3213 5.35583 32.3212 6.73197 31.9283C7.9319 31.5856 9.29252 31.3373 9.42209 29.5895C9.516 28.3226 10.0546 27.1744 11.1482 26.402C11.6253 26.065 12.1565 25.9813 12.6453 26.4034C13.1923 26.8757 12.9699 27.3629 12.635 27.8391C12.4484 28.1044 12.2233 28.3497 12.0777 28.6356C10.8073 31.1297 12.3506 33.4931 14.8796 33.3264C18.0494 33.1174 19.9441 31.5602 20.4429 28.3008C20.7488 26.3018 21.6734 25.7422 23.4282 26.6197C25.7185 27.7649 27.9264 27.6009 30.1104 26.3994C32.6905 24.98 34.8493 23.1608 35.8491 20.2561C36.051 19.6698 36.3576 19.1588 37.1088 19.2087C37.7827 19.2535 37.998 19.7311 38.1352 20.2883C38.1887 20.5056 38.2886 20.6918 38.5426 20.7298C42.0028 19.4619 43.2407 17.4923 42.8413 13.8897C42.6351 12.0294 41.3499 11.0854 39.6168 11.5925C39.6904 12.9773 40.1985 14.3338 40.0857 15.7508C40.035 16.3867 39.8753 16.987 39.1367 17.0581C38.406 17.1284 38.0804 16.6182 37.9716 15.9648C37.8559 15.2703 37.7589 14.5726 37.6636 13.8749C37.5082 12.7362 37.2291 11.6325 36.5763 10.673C36.2896 10.2515 36.0166 9.71598 35.2865 10.0425C33.7902 10.7117 33.5486 9.90254 33.7716 8.66751C34.0297 7.23761 33.3758 6.49317 32.0184 6.29564C30.7606 6.11261 29.4883 6.93121 29.403 8.1327C29.3097 9.44725 28.8009 9.89561 27.5338 9.53974C26.3446 9.20574 25.5728 9.69417 25.0701 10.7981C24.7126 11.5834 24.2681 12.3339 23.8098 13.0671C23.4477 13.6464 22.8644 13.8441 22.2604 13.5089C21.6133 13.1497 21.6422 12.5474 21.9469 11.9531C22.2928 11.2784 22.671 10.6202 23.0162 9.94517C23.9189 8.17982 24.4661 6.32664 24.3051 4.32004C24.1699 2.6356 23.4061 2.01349 21.7416 2.17506C20.0197 2.34219 19.0863 3.48621 18.3616 4.88909C17.3176 6.91041 16.2831 8.9367 15.2337 10.9552C14.9736 11.4553 14.6083 11.9054 13.978 11.7987C13.28 11.6806 13.0017 11.1851 13.1659 10.2553Z"
            fill="#ffffff"
          />
          <path
            d="M7.43062 18.663C6.75338 18.092 6.66709 17.5255 7.17404 16.9256C7.52803 16.5066 7.9914 16.418 8.47043 16.6784C8.99363 16.9628 9.26232 17.4361 9.06125 18.0149C8.81126 18.7346 8.26383 18.9717 7.43062 18.663Z"
            fill="#ffffff"
          />
          <path
            d="M13.5305 17.2049C14.3804 16.8649 14.8934 17.1148 15.1532 17.8418C15.3641 18.432 15.1164 18.8891 14.6169 19.2016C14.21 19.4562 13.7725 19.4054 13.4399 19.0767C12.8582 18.5019 12.7856 17.8821 13.5305 17.2049Z"
            fill="#ffffff"
          />
        </svg>
        <h1 class="font-maru font-medium text-2xl text-white -tracking-[.1em] ml-2"
          >三月兔<span class="ml-2 text-sm tracking-tighter">後台管理</span></h1
        >
      </RouterLink>

      <!-- Navigation links -->
      <div class="flex flex-col justify-between grow" id="navbarSupportedContentY">
        <ul class="flex flex-col" data-te-navbar-nav-ref>
          <li class="leading-9" data-te-nav-item-ref>
            <RouterLink class="relative block py-3 transition px-9" to="/admin/product" exact>商品列表</RouterLink>
          </li>
          <li class="leading-9" data-te-nav-item-ref>
            <RouterLink class="relative block py-3 transition px-9" to="/admin/order">訂單管理</RouterLink>
          </li>
          <li class="leading-9" data-te-nav-item-ref>
            <RouterLink class="relative block py-3 transition px-9" to="/admin/coupon">優惠券</RouterLink>
          </li>
          <li class="leading-9" data-te-nav-item-ref>
            <RouterLink class="relative block py-3 transition px-9" to="/">部落格文章</RouterLink>
          </li>
        </ul>
        <div class="px-9">
          <button
            class="block px-[22px] py-3 mb-2 lg:mb-0 text-sm leading-none uppercase align-middle transition duration-150 ease-in-out border rounded border-neutral-50 text-neutral-50 hover:border-neutral-100 hover:bg-neutral-100 hover:text-cerulean focus:border-neutral-100 focus:outline-none focus:ring-0 active:border-neutral-300"
            data-te-ripple-init
            @click.prevent="signOut"
          >
            登出
          </button>
        </div>
      </div>
    </div>
  </nav>
</template>

<script>
import { initTE, Offcanvas } from 'tw-elements';

export default {
  methods: {
    signOut() {
      const api = `${import.meta.env.VITE_APP_API}/logout`;
      this.$http.post(api).then((res) => {
        if (res.data.success) {
          this.$router.push('/login');
        }
      });
    },
  },
  mounted() {
    initTE({ initTE, Offcanvas });
  },
};
</script>

<style scoped lang="scss">
.router-link-active {
  &::before {
    content: '';
    position: absolute;
    width: 4px;
    height: 36px;
    z-index: -1;
    left: 0;
    background-color: #ffffff;
  }
}

a {
  transition: all 0.3s;
  &:hover {
    transform: translateY(-5%);
  }
}
</style>
